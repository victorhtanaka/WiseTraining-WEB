import{a as Oe,b as be,e as q,f as st,h as oe,i as Ie}from"./chunk-3T3Z5BFP.js";import{a as lt,b as Tt,c as Lt,d as $t,e as Vt,f as jt}from"./chunk-KGPQZYMG.js";import{a as Fe,b as ke,c as kt,f as Te,g as De,i as Nt}from"./chunk-5R5HMRID.js";import{c as ct}from"./chunk-P7CFY6IH.js";import{D as bt,E as It,F as we,G as St,H as Et,I as wt,J as Ft,K,L as Dt,b as dt,c as mt,d as ut,e as pt,f as gt,g as _t,h as Ct,i as ft,j as ht,k as vt,l as xt,o as Se,r as Ee,s as Mt,v as Pt,w as yt,z as Ot}from"./chunk-5VTVZEZ6.js";import{Ad as et,Bd as H,Ca as i,Cb as We,Cc as me,Cd as W,D as w,Da as n,Dd as Q,Ea as g,Eb as te,Ed as ie,Fa as V,Fd as tt,Ga as j,Gb as R,Gd as J,Hb as ne,Hc as N,Hd as nt,Ia as k,Ic as Je,Id as it,J as je,Jb as Qe,Ka as h,Kd as Me,La as m,Nd as ot,Pa as ze,Q as M,Qa as Re,R as P,Ra as Ue,Rd as Pe,Sa as B,Sd as rt,Ta as r,Ua as f,Va as b,Vd as ye,Wa as ae,Wd as at,a as $e,ab as Z,b as Ve,bb as Ae,cb as ee,d as Y,da as re,db as ce,ea as F,eb as qe,ed as U,fa as c,fb as se,gd as A,hd as Ke,ja as _,jd as ue,l as O,ld as y,ma as $,mb as le,na as Ne,nb as G,ob as z,od as pe,pd as ge,qb as de,r as L,ra as p,rb as Ge,rd as _e,sb as He,sd as Ce,ta as s,td as fe,ud as Xe,va as Be,vd as Ye,wd as he,x as D,xd as ve,yd as xe,zd as Ze}from"./chunk-346T4PMV.js";var Rt=(t,l)=>({published:t,draft:l}),zt=t=>["/Courses/Edit",t];function Ut(t,l){t&1&&(i(0,"th",15),r(1,"Course Title"),n())}function At(t,l){if(t&1&&g(0,"img",19),t&2){let e=m().$implicit,a=m();s("src",a.getMediaUrl(e),F)}}function qt(t,l){if(t&1&&(i(0,"td",16)(1,"div",17),p(2,At,1,1,"img",18),i(3,"span"),r(4),n()()()),t&2){let e=l.$implicit;c(2),s("ngIf",e.media),c(2),f(e.title)}}function Gt(t,l){t&1&&(i(0,"th",15),r(1,"Status"),n())}function Ht(t,l){if(t&1&&(i(0,"td",16)(1,"span",20),r(2),n()()),t&2){let e=l.$implicit;c(),s("ngClass",Ae(2,Rt,e.isPublished,!e.isPublished)),c(),b(" ",e.isPublished?"Published":"Draft"," ")}}function Wt(t,l){t&1&&(i(0,"th",15),r(1,"Enrollments"),n())}function Qt(t,l){if(t&1&&(i(0,"td",16),r(1),n()),t&2){let e=l.$implicit;c(),f(e.totalEnrollments)}}function Jt(t,l){t&1&&(i(0,"th",15)(1,"span",21),r(2,"Actions"),n()())}function Kt(t,l){if(t&1&&(i(0,"td",16)(1,"button",22)(2,"mat-icon"),r(3,"more_horiz"),n()(),i(4,"mat-menu",null,0)(6,"button",23),r(7,"Edit"),n(),i(8,"button",24),r(9,"View Enrollments"),n(),i(10,"button",24),r(11,"Preview"),n(),i(12,"button",25),r(13,"Delete"),n()()()),t&2){let e=l.$implicit,a=B(5);c(),s("matMenuTriggerFor",a),c(5),s("routerLink",Z(2,zt,e.id))}}function Xt(t,l){t&1&&g(0,"tr",26)}function Yt(t,l){t&1&&g(0,"tr",27)}var Zt=t=>({published:t});function en(t,l){t&1&&g(0,"mat-spinner",41)}function tn(t,l){if(t&1&&(i(0,"mat-option",42),r(1),n()),t&2){let e=l.$implicit;s("value",e.id),c(),f(e.name)}}function nn(t,l){if(t&1&&(i(0,"mat-option",42),r(1),n()),t&2){let e=l.$implicit;s("value",e.id),c(),f(e.name)}}function on(t,l){t&1&&(V(0),i(1,"mat-icon"),r(2,"cloud_upload"),n(),i(3,"span"),r(4,"Click to upload a file"),n(),j())}function rn(t,l){if(t&1&&g(0,"img",54),t&2){let e,a=m(2).$implicit,o=m();s("src",o.getMediaUrl((e=o.getMediaGroup(a).get("url"))==null?null:e.value),F)}}function an(t,l){if(t&1&&g(0,"video",55),t&2){let e,a=m(2).$implicit,o=m();s("src",o.getMediaUrl((e=o.getMediaGroup(a).get("url"))==null?null:e.value),F)}}function cn(t,l){t&1&&(i(0,"p"),r(1," Document File "),n())}function sn(t,l){if(t&1&&(i(0,"div",50),p(1,rn,1,1,"img",51)(2,an,1,1,"video",52)(3,cn,2,0,"p",53),n()),t&2){let e,a,o,d=m().$implicit,u=m();c(),s("ngIf",((e=u.getMediaGroup(d).get("type"))==null?null:e.value)==="image"),c(),s("ngIf",((a=u.getMediaGroup(d).get("type"))==null?null:a.value)==="video"),c(),s("ngIf",((o=u.getMediaGroup(d).get("type"))==null?null:o.value)!=="image"&&((o=u.getMediaGroup(d).get("type"))==null?null:o.value)!=="video")}}function ln(t,l){if(t&1&&(i(0,"div",56)(1,"mat-form-field",19),g(2,"input",57),n()()),t&2){let e=m(2);s("formGroup",e.media)}}function dn(t,l){if(t&1){let e=k();i(0,"div",43)(1,"mat-card",16)(2,"div",44)(3,"button",45),h("click",function(){let o=M(e).index,d=m();return P(d.removeContent(o))}),i(4,"mat-icon"),r(5,"delete"),n()()(),i(6,"div",18)(7,"mat-label"),r(8,"Order"),n(),i(9,"mat-form-field",19),g(10,"input",46),n()(),i(11,"div",18)(12,"mat-label"),r(13,"Title"),n(),i(14,"mat-form-field",19),g(15,"input",47),n()(),i(16,"div",18)(17,"mat-label"),r(18,"Text Content"),n(),i(19,"mat-form-field",19),g(20,"textarea",48),n()(),i(21,"div",18)(22,"mat-label"),r(23,"Duration (minutes)"),n(),i(24,"mat-form-field",19),g(25,"input",49),n()(),i(26,"div",18)(27,"mat-card",16)(28,"mat-card-header")(29,"mat-card-title"),r(30,"Content Media"),n(),i(31,"mat-card-subtitle"),r(32,"Upload or select an image or video for this content."),n()(),i(33,"mat-card-content")(34,"div",34),h("click",function(){M(e);let o=B(39);return P(o.click())}),p(35,on,5,0,"ng-container",35)(36,sn,4,3,"ng-template",null,2,se),n(),i(38,"input",36,3),h("change",function(o){let d=M(e).index,u=m();return P(u.onFileSelected(o,d))}),n(),p(40,ln,3,1,"div",37),n()()()()()}if(t&2){let e,a=l.$implicit,o=l.index,d=B(37),u=m();s("formGroupName",o),c(35),s("ngIf",!((e=u.getMediaGroup(a).get("url"))!=null&&e.value))("ngIfElse",d),c(5),s("ngIf",u.uploadedFile)}}function mn(t,l){t&1&&(V(0),i(1,"mat-icon"),r(2,"cloud_upload"),n(),i(3,"span"),r(4,"Click to upload a file"),n(),j())}function un(t,l){if(t&1&&g(0,"img",54),t&2){let e=m(2);s("src",e.previewUrl,F)}}function pn(t,l){if(t&1&&g(0,"video",55),t&2){let e=m(2);s("src",e.previewUrl,F)}}function gn(t,l){if(t&1&&(i(0,"p"),r(1),n()),t&2){let e=m(2);c(),b(" ",e.uploadedFile==null?null:e.uploadedFile.name," ")}}function _n(t,l){if(t&1&&(i(0,"div",50),p(1,un,1,1,"img",51)(2,pn,1,1,"video",52)(3,gn,2,1,"p",53),n()),t&2){let e=m();c(),s("ngIf",e.isImageFile()),c(),s("ngIf",e.isVideoFile()),c(),s("ngIf",!e.isImageFile()&&!e.isVideoFile())}}function Cn(t,l){if(t&1&&(i(0,"div",56)(1,"mat-form-field",19),g(2,"input",57),n()()),t&2){let e=m();s("formGroup",e.media)}}var fn=".course-title-with-image[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.course-title-with-image[_ngcontent-%COMP%]   .course-thumbnail[_ngcontent-%COMP%]{width:60px;height:40px;object-fit:cover;border-radius:4px;border:1px solid #e0e0e0}.upload-container[_ngcontent-%COMP%]{width:100%;height:200px;border:2px dashed #ccc;border-radius:8px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;transition:all .3s ease;margin-bottom:16px;background-color:#f9f9f9}.upload-container[_ngcontent-%COMP%]:hover{border-color:#3f51b5;background-color:#f5f5f5}.upload-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;height:40px;width:40px;color:#757575;margin-bottom:8px}.upload-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#757575}.upload-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:hidden}.upload-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .upload-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.upload-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:4px}",hn=["videoElement"];function vn(t,l){if(t&1&&g(0,"img",28),t&2){let e=m(3);s("src",e.getMediaUrl(e.selectedContent.media.url),F)}}function xn(t,l){if(t&1&&g(0,"video",29,0),t&2){let e=m(3);s("src",e.getMediaUrl(e.selectedContent.media.url),F)}}function Mn(t,l){if(t&1){let e=k();i(0,"div",30),h("click",function(o){M(e);let d=m(3);return P(d.playVideo(o))}),i(1,"mat-icon"),r(2,"play_arrow"),n()()}}function Pn(t,l){if(t&1&&(i(0,"div",24),p(1,vn,1,1,"img",25)(2,xn,2,1,"video",26)(3,Mn,3,0,"div",27),n()),t&2){let e=m(2);c(),s("ngIf",e.selectedContent.media&&e.selectedContent.media.type==="image"),c(),s("ngIf",e.selectedContent.media&&e.selectedContent.media.type==="video"),c(),s("ngIf",e.selectedContent.media&&e.selectedContent.media.type==="video")}}function yn(t,l){if(t&1&&(i(0,"div",24),g(1,"img",31),n()),t&2){let e=m(2);c(),s("src",e.getMediaUrl(e.course.media.url),F)}}function On(t,l){t&1&&(i(0,"div",32)(1,"mat-icon"),r(2,"image"),n(),i(3,"p"),r(4,"No media available"),n()())}function bn(t,l){if(t&1&&(i(0,"p",33),r(1),n()),t&2){let e=m(2);c(),f(e.selectedContent.title)}}function In(t,l){if(t&1&&(i(0,"span",38),r(1),n()),t&2){let e=m(3);c(),f(e.course.language)}}function Sn(t,l){if(t&1&&(i(0,"p",34)(1,"span",35),r(2),n(),i(3,"span",36),r(4),n(),p(5,In,2,1,"span",37),n()),t&2){let e=m(2);c(2),f(e.course.category.name),c(2),b("",e.course.duration," min"),c(),s("ngIf",e.course.language)}}function En(t,l){if(t&1&&(i(0,"span",41),r(1),n()),t&2){let e=l.$implicit;c(),f(e.name)}}function wn(t,l){if(t&1&&(i(0,"div",39),p(1,En,2,1,"span",40),n()),t&2){let e=m(2);c(),s("ngForOf",e.course.tags)}}function Fn(t,l){if(t&1){let e=k();i(0,"div",42)(1,"h2"),r(2),n(),g(3,"div",43),i(4,"p",44)(5,"mat-icon"),r(6,"schedule"),n(),r(7),n(),i(8,"div",45)(9,"button",46),h("click",function(){M(e);let o=m(2);return P(o.navigateContent("prev"))}),i(10,"mat-icon"),r(11,"navigate_before"),n(),r(12," Previous "),n(),i(13,"button",46),h("click",function(){M(e);let o=m(2);return P(o.navigateContent("next"))}),r(14," Next "),i(15,"mat-icon"),r(16,"navigate_next"),n()()()()}if(t&2){let e=m(2);c(2),f(e.selectedContent.title),c(),s("innerHTML",e.selectedContent.textContent,re),c(4),b(" ",e.selectedContent.duration," minutes ")}}function kn(t,l){if(t&1&&(i(0,"div",47)(1,"h2"),r(2,"About this course"),n(),g(3,"div",48),n()),t&2){let e=m(2);c(3),s("innerHTML",e.course.description,re)}}function Tn(t,l){t&1&&(i(0,"mat-icon"),r(1,"play_circle_outline"),n())}function Dn(t,l){t&1&&(i(0,"mat-icon"),r(1,"image"),n())}function Ln(t,l){t&1&&(i(0,"mat-icon"),r(1,"article"),n())}function $n(t,l){if(t&1){let e=k();i(0,"mat-list-item",49),h("click",function(){let o=M(e).$implicit,d=m(2);return P(d.selectContent(o))}),i(1,"div",50)(2,"div",51),p(3,Tn,2,0,"mat-icon",52)(4,Dn,2,0,"mat-icon",52)(5,Ln,2,0,"mat-icon",52),n(),i(6,"div",53)(7,"span",54),r(8),n(),i(9,"span",55),r(10),n()()()()}if(t&2){let e=l.$implicit,a=m(2);Be("active",a.selectedContent&&a.selectedContent.id===e.id),c(3),s("ngIf",e.media&&e.media.type==="video"),c(),s("ngIf",e.media&&e.media.type==="image"),c(),s("ngIf",!e.media),c(3),f(e.title),c(2),b("",e.duration," min")}}function Vn(t,l){if(t&1&&(i(0,"button",56)(1,"mat-icon"),r(2,"edit"),n(),r(3," Edit Course "),n()),t&2){let e=m(2);s("routerLink",Z(1,zt,e.course.id))}}function jn(t,l){if(t&1&&(i(0,"div",4)(1,"div",5)(2,"div",6),p(3,Pn,4,3,"div",7)(4,yn,2,1,"div",7)(5,On,5,0,"div",8),n(),i(6,"div",9)(7,"h1",10),r(8),n(),p(9,bn,2,1,"p",11)(10,Sn,6,3,"p",12)(11,wn,2,1,"div",13),n(),p(12,Fn,17,3,"div",14)(13,kn,4,1,"div",15),n(),i(14,"div",16)(15,"div",17)(16,"h2"),r(17,"Course Content"),n(),i(18,"span",18),r(19),n()(),i(20,"mat-list",19),p(21,$n,11,7,"mat-list-item",20),n(),i(22,"div",21)(23,"button",22),r(24," Back to Courses "),n(),p(25,Vn,4,3,"button",23),n()()()),t&2){let e=m();c(3),s("ngIf",e.selectedContent&&e.selectedContent.mediaId),c(),s("ngIf",(!e.selectedContent||!e.selectedContent.mediaId)&&e.course.mediaId&&e.course.media),c(),s("ngIf",(!e.selectedContent||!e.selectedContent.mediaId)&&(!e.course.mediaId||!e.course.media)),c(3),f(e.course.title),c(),s("ngIf",e.selectedContent),c(),s("ngIf",e.course.category),c(),s("ngIf",e.course.tags&&e.course.tags.length>0),c(),s("ngIf",e.selectedContent),c(),s("ngIf",!e.selectedContent),c(6),b("",e.courseContents.length," items"),c(2),s("ngForOf",e.courseContents),c(4),s("ngIf",e.course.id)}}function Nn(t,l){t&1&&(i(0,"div",57),g(1,"mat-spinner"),i(2,"p"),r(3,"Loading course..."),n()())}function Bn(t,l){t&1&&(i(0,"div",58)(1,"mat-icon",59),r(2,"error_outline"),n(),i(3,"h2"),r(4,"Course not found"),n(),i(5,"p"),r(6,"The course you're looking for could not be found."),n(),i(7,"button",60),r(8,"Back to Courses"),n()())}function zn(t,l){if(t&1&&(i(0,"mat-option",8),r(1),n()),t&2){let e=l.$implicit;s("value",e.id),c(),b(" ",e.name," ")}}function Rn(t,l){if(t&1&&(i(0,"mat-option",8),r(1),n()),t&2){let e=l.$implicit;s("value",e),c(),b(" ",e," ")}}function Un(t,l){if(t&1&&(i(0,"mat-option",8),r(1),n()),t&2){let e=l.$implicit;s("value",e.id),c(),b(" ",e.name," ")}}function An(t,l){if(t&1&&g(0,"img",34),t&2){let e=m().$implicit;s("src",e.media==null?null:e.media.url,F)("alt",e.title)}}function qn(t,l){t&1&&g(0,"img",35)}function Gn(t,l){if(t&1&&(i(0,"div")(1,"mat-icon"),r(2,"language"),n(),i(3,"span"),r(4),n()()),t&2){let e=m().$implicit;c(4),f(e.language)}}function Hn(t,l){if(t&1&&(i(0,"mat-chip"),r(1),n()),t&2){let e=l.$implicit;c(),f(e.name)}}function Wn(t,l){if(t&1){let e=k();i(0,"mat-card",25),p(1,An,1,2,"img",26)(2,qn,1,0,"img",27),i(3,"mat-card-header")(4,"mat-card-title"),r(5),n(),i(6,"mat-card-subtitle"),r(7),n()(),i(8,"mat-card-content")(9,"p"),r(10),ee(11,"slice"),n(),i(12,"div",28)(13,"div")(14,"mat-icon"),r(15,"schedule"),n(),i(16,"span"),r(17),n()(),p(18,Gn,5,1,"div",29),n(),i(19,"div",30)(20,"mat-chip-listbox"),p(21,Hn,2,1,"mat-chip",31),n()(),i(22,"div",32),r(23),ee(24,"number"),n()(),i(25,"mat-card-actions")(26,"button",33),h("click",function(){let o=M(e).$implicit,d=m(3);return P(d.viewCourse(o.id))}),i(27,"mat-icon"),r(28,"visibility"),n(),r(29," Ver detalhes "),n()()()}if(t&2){let e=l.$implicit;c(),s("ngIf",e.media==null?null:e.media.url),c(),s("ngIf",!(e.media!=null&&e.media.url)),c(3),f(e.title),c(2),f(e.category==null?null:e.category.name),c(3),ae("",qe(11,10,e.description||"",0,100),"",((e.description==null?null:e.description.length)||0)>100?"...":"",""),c(7),b("",e.duration," minutos"),c(),s("ngIf",e.language),c(3),s("ngForOf",e.tags),c(2),b(" R$ ",ce(24,14,e.price,"1.2-2")," ")}}function Qn(t,l){if(t&1&&(i(0,"div",23),p(1,Wn,30,17,"mat-card",24),n()),t&2){let e=m(2);c(),s("ngForOf",e.courses)}}function Jn(t,l){if(t&1){let e=k();i(0,"div",36)(1,"mat-icon"),r(2,"search_off"),n(),i(3,"h3"),r(4,"Nenhum curso encontrado com os filtros atuais"),n(),i(5,"button",37),h("click",function(){M(e);let o=m(2);return P(o.resetFilters())}),i(6,"mat-icon"),r(7,"refresh"),n(),r(8," Limpar filtros e tentar novamente "),n()()}}function Kn(t,l){if(t&1){let e=k();i(0,"mat-paginator",38),h("page",function(o){M(e);let d=m(2);return P(d.onPageChange(o))}),n()}if(t&2){let e=m(2);s("length",e.totalCourses)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)("pageIndex",e.currentPage)}}function Xn(t,l){if(t&1&&(i(0,"div",19)(1,"h2"),r(2),n(),p(3,Qn,2,1,"div",20)(4,Jn,9,0,"div",21)(5,Kn,1,4,"mat-paginator",22),n()),t&2){let e=m();c(2),b("Resultados (",e.totalCourses," cursos encontrados)"),c(),s("ngIf",e.courses.length>0),c(),s("ngIf",e.courses.length===0),c(),s("ngIf",e.totalCourses>0)}}function Yn(t,l){t&1&&(i(0,"div",39),g(1,"mat-spinner",40),i(2,"p"),r(3,"Carregando cursos..."),n()())}function Zn(t,l){t&1&&(i(0,"div",6),g(1,"mat-spinner",7),i(2,"p"),r(3,"Carregando curso..."),n()())}function ei(t,l){if(t&1){let e=k();i(0,"div",8)(1,"mat-icon",9),r(2,"error"),n(),i(3,"h2"),r(4),n(),i(5,"button",10),h("click",function(){M(e);let o=m();return P(o.goBackToCatalog())}),r(6," Voltar ao Cat\xE1logo "),n()()}if(t&2){let e=m();c(4),f(e.errorMessage)}}function ti(t,l){if(t&1&&g(0,"img",28),t&2){let e=m(2);s("src",(e.course.media==null?null:e.course.media.url)||"assets/images/course-placeholder.jpg",F)("alt",e.course.title)}}function ni(t,l){t&1&&g(0,"img",29)}function ii(t,l){if(t&1&&(i(0,"div")(1,"mat-icon"),r(2,"category"),n(),i(3,"span"),r(4),n()()),t&2){let e=m(2);c(4),f(e.course.category.name)}}function oi(t,l){if(t&1&&(i(0,"div")(1,"mat-icon"),r(2,"language"),n(),i(3,"span"),r(4),n()()),t&2){let e=m(2);c(4),f(e.course.language)}}function ri(t,l){if(t&1&&(i(0,"mat-chip"),r(1),n()),t&2){let e=l.$implicit;c(),f(e.name)}}function ai(t,l){if(t&1){let e=k();i(0,"button",30),h("click",function(){M(e);let o=m(2);return P(o.purchaseCourse())}),i(1,"mat-icon"),r(2,"shopping_cart"),n(),r(3," Comprar este curso "),n()}if(t&2){let e=m(2);s("disabled",e.isLoading)}}function ci(t,l){t&1&&(i(0,"div",31)(1,"mat-icon",32),r(2,"check_circle"),n(),i(3,"span"),r(4,"Curso j\xE1 adquirido"),n()())}function si(t,l){if(t&1&&(i(0,"div",35),r(1),n()),t&2){let e=m().$implicit;c(),f(e.textContent)}}function li(t,l){if(t&1&&(i(0,"mat-list-item")(1,"mat-icon",34),r(2,"article"),n(),i(3,"div",35),r(4),n(),p(5,si,2,1,"div",36),n()),t&2){let e=l.$implicit,a=l.index;c(4),ae("",a+1,". ",e.title,""),c(),s("ngIf",e.textContent)}}function di(t,l){if(t&1&&(i(0,"mat-card",33)(1,"mat-card-header")(2,"mat-card-title"),r(3,"Conte\xFAdo do Curso"),n()(),i(4,"mat-card-content")(5,"mat-list"),p(6,li,6,3,"mat-list-item",20),n()()()),t&2){let e=m(2);c(6),s("ngForOf",e.course.contents)}}function mi(t,l){if(t&1&&(i(0,"div",11)(1,"div",12)(2,"div",13),p(3,ti,1,2,"img",14)(4,ni,1,0,"img",15),n(),i(5,"div",16)(6,"h1"),r(7),n(),i(8,"div",17),p(9,ii,5,1,"div",18)(10,oi,5,1,"div",18),i(11,"div")(12,"mat-icon"),r(13,"schedule"),n(),i(14,"span"),r(15),n()()(),i(16,"div",19)(17,"mat-chip-listbox"),p(18,ri,2,1,"mat-chip",20),n()(),i(19,"div",21)(20,"div",22)(21,"span"),r(22,"Pre\xE7o:"),n(),i(23,"h2"),r(24),ee(25,"number"),n()(),i(26,"div",23),p(27,ai,4,1,"button",24)(28,ci,5,0,"div",25),n()()()(),i(29,"mat-card",26)(30,"mat-card-header")(31,"mat-card-title"),r(32,"Descri\xE7\xE3o do Curso"),n()(),i(33,"mat-card-content")(34,"p"),r(35),n()()(),p(36,di,7,1,"mat-card",27),n()),t&2){let e=m();c(3),s("ngIf",e.course.media==null?null:e.course.media.url),c(),s("ngIf",!(e.course.media!=null&&e.course.media.url)),c(3),f(e.course.title),c(2),s("ngIf",e.course.category),c(),s("ngIf",e.course.language),c(5),b("",e.course.duration," minutos"),c(3),s("ngForOf",e.course.tags),c(6),b("R$ ",ce(25,12,e.course.price,"1.2-2"),""),c(3),s("ngIf",!e.courseOwned),c(),s("ngIf",e.courseOwned),c(7),f(e.course.description),c(),s("ngIf",e.course.contents&&e.course.contents.length>0)}}var ui=(()=>{class t{constructor(e,a,o,d){this.courseService=e,this.mediaService=a,this.router=o,this.snackBar=d,this.displayedColumns=["title","status","enrollments","actions"],this.courses=[],this.isLoading=!1}ngOnInit(){this.loadCourses()}loadCourses(){this.isLoading=!0,this.courseService.getAll().pipe(w(e=>{let a=e.filter(o=>o.mediaId).map(o=>this.mediaService.getById(o.mediaId).pipe(D(()=>O(null)),w(d=>{if(d){let u=e.findIndex(C=>C.id===o.id);u>=0&&(e[u].media=d)}return O(null)})));return a.length>0?L(a).pipe(w(()=>O(e))):O(e)})).subscribe({next:e=>{this.courses=e,this.isLoading=!1},error:e=>{console.error("Error loading courses:",e),this.snackBar.open("Error loading courses","Close",{duration:3e3}),this.isLoading=!1}})}getMediaUrl(e){return e.media?this.mediaService.getFullUrl(e.media.url):""}createDefaultCourse(){return Y(this,null,function*(){try{this.isLoading=!0;let e={id:0,url:"https://placehold.co/600x400?text=Default+Course+Image",type:"image"},a=yield this.mediaService.post(e).toPromise();if(!a)throw new Error("Failed to create default media");let o={id:0,title:"New Course",description:"Course description",categoryId:1,duration:60,price:0,language:"Portuguese",isPublished:!1,companyId:1,mediaId:a.id},d=yield this.courseService.post(o).toPromise();if(!d)throw new Error("Failed to create default course");this.router.navigate(["/Courses/Edit",d.id])}catch(e){console.error("Error creating default course:",e),this.snackBar.open("Error creating default course: "+(e.message||"Unknown error"),"Close",{duration:5e3}),this.isLoading=!1}})}static{this.\u0275fac=function(a){return new(a||t)(_(q),_(oe),_(R),_(U))}}static{this.\u0275cmp=$({type:t,selectors:[["app-courses-list"]],standalone:!1,decls:31,vars:4,consts:[["actionsMenu","matMenu"],[1,"courses-list-card"],[1,"header-content"],[1,"header-actions"],["mat-stroked-button",""],["mat-flat-button","","color","primary",3,"click","disabled"],["mat-table","",1,"courses-table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","enrollments"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"course-title-with-image"],["alt","Course Image","class","course-thumbnail",3,"src",4,"ngIf"],["alt","Course Image",1,"course-thumbnail",3,"src"],[1,"status-badge",3,"ngClass"],[1,"visually-hidden"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item",""],["mat-menu-item","",1,"danger"],["mat-header-row",""],["mat-row",""]],template:function(a,o){a&1&&(i(0,"mat-card",1)(1,"mat-card-header")(2,"div",2)(3,"div")(4,"mat-card-title"),r(5,"Courses"),n(),i(6,"mat-card-subtitle"),r(7,"Manage your courses and view their status."),n()(),i(8,"div",3)(9,"button",4),r(10,"Export"),n(),i(11,"button",5),h("click",function(){return o.createDefaultCourse()}),i(12,"mat-icon"),r(13,"add_circle"),n(),r(14," Create Course "),n()()()(),i(15,"mat-card-content")(16,"table",6),V(17,7),p(18,Ut,2,0,"th",8)(19,qt,5,2,"td",9),j(),V(20,10),p(21,Gt,2,0,"th",8)(22,Ht,3,5,"td",9),j(),V(23,11),p(24,Wt,2,0,"th",8)(25,Qt,2,1,"td",9),j(),V(26,12),p(27,Jt,3,0,"th",8)(28,Kt,14,4,"td",9),j(),p(29,Xt,1,0,"tr",13)(30,Yt,1,0,"tr",14),n()()()),a&2&&(c(11),s("disabled",o.isLoading),c(5),s("dataSource",o.courses),c(13),s("matHeaderRowDef",o.displayedColumns),c(),s("matRowDefColumns",o.displayedColumns))},dependencies:[le,z,ne,N,me,H,Q,J,ie,W,A,dt,ut,Ct,pt,mt,ft,gt,_t,ht,vt,$t,Lt,Vt],styles:[".courses-list-card[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.courses-table[_ngcontent-%COMP%]{width:100%}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem}.status-badge.published[_ngcontent-%COMP%]{background-color:#00c8531a;color:#00963c}.status-badge.draft[_ngcontent-%COMP%]{background-color:#6464641a;color:#505050;border:1px solid rgba(100,100,100,.2)}.status-badge.archived[_ngcontent-%COMP%]{background-color:#c800001a;color:#960000}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.danger[_ngcontent-%COMP%]{color:#c80000}button[mat-flat-button][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}",".course-title-with-image[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.course-title-with-image[_ngcontent-%COMP%]   .course-thumbnail[_ngcontent-%COMP%]{width:60px;height:40px;object-fit:cover;border-radius:4px;border:1px solid #e0e0e0}.upload-container[_ngcontent-%COMP%]{width:100%;height:200px;border:2px dashed #ccc;border-radius:8px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;transition:all .3s ease;margin-bottom:16px;background-color:#f9f9f9}.upload-container[_ngcontent-%COMP%]:hover{border-color:#3f51b5;background-color:#f5f5f5}.upload-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;height:40px;width:40px;color:#757575;margin-bottom:8px}.upload-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#757575}.upload-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:hidden}.upload-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .upload-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.upload-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:4px}"]})}}return t})(),Bt=(()=>{class t{constructor(e,a,o,d,u,C,I,x,S){this.fb=e,this.courseService=a,this.categoryService=o,this.tagService=d,this.mediaService=u,this.courseContentService=C,this.router=I,this.snackBar=x,this.route=S,this.categories=[],this.tags=[],this.isLoading=!1,this.isEditMode=!1,this.existingContents=[],this.uploadedFile=null,this.previewUrl=null,this.courseMediaFile=null,this.contentMediaFiles=new Map}ngOnInit(){this.initForm(),this.loadCategories(),this.loadTags(),this.route.params.subscribe(e=>{e.courseId&&(this.isEditMode=!0,this.courseId=+e.courseId,this.loadCourseData(this.courseId))})}initForm(){this.courseForm=this.fb.group({title:["",[y.required,y.maxLength(100)]],description:["",y.required],categoryId:[null,y.required],tagIds:[[]],duration:[0,[y.required,y.min(1)]],price:[0,[y.required,y.min(0)]],language:["",y.maxLength(50)],isPublished:[!1],companyId:[1],media:this.fb.group({url:["",y.required],type:["",y.required]}),contents:this.fb.array([])})}loadCourseData(e){this.isLoading=!0,this.courseService.getById(e).pipe(w(a=>{this.existingCourse=a;let o=a.mediaId?this.mediaService.getById(a.mediaId).pipe(D(u=>(console.error("Error loading media:",u),O(null)))):O(null),d=this.courseContentService.getAll().pipe(D(u=>(console.error("Error loading course contents:",u),O([]))),w(u=>{let C=u.filter(I=>I.courseId===e);if(C.length>0){let I=C.filter(x=>x.mediaId).map(x=>this.mediaService.getById(x.mediaId).pipe(D(()=>O(null)),w(S=>{if(S){let v=C.findIndex(T=>T.id===x.id);v>=0&&(C[v].media=S)}return O(null)})));if(I.length>0)return L(I).pipe(w(()=>O(C)))}return O(C)}));return L({media:o,contents:d})})).subscribe({next:({media:a,contents:o})=>{this.existingMedia=a??void 0,this.existingContents=o,this.populateForm(),this.isLoading=!1},error:a=>{console.error("Error loading course data:",a),this.snackBar.open("Error loading course data","Close",{duration:3e3}),this.isLoading=!1}})}populateForm(){if(this.existingCourse){if(this.courseForm.patchValue({title:this.existingCourse.title,description:this.existingCourse.description,categoryId:this.existingCourse.categoryId,duration:this.existingCourse.duration,price:this.existingCourse.price,language:this.existingCourse.language,isPublished:this.existingCourse.isPublished,companyId:this.existingCourse.companyId}),this.existingCourse.tags&&this.existingCourse.tags.length>0){let e=this.existingCourse.tags.map(a=>a.id);this.courseForm.get("tagIds")?.setValue(e)}if(this.existingMedia&&(this.courseForm.get("media")?.patchValue({url:this.existingMedia.url,type:this.existingMedia.type}),this.existingMedia?.url&&(this.previewUrl=this.mediaService.getFullUrl(this.existingMedia.url),this.uploadedFile=new File([],"existing-media",{type:this.existingMedia.type==="image"?"image/jpeg":this.existingMedia.type==="video"?"video/mp4":"application/octet-stream"}))),this.existingContents&&this.existingContents.length>0){this.contents.clear();let e=[...this.existingContents].sort((a,o)=>a.order-o.order);for(let a of e){let o=this.fb.group({id:[a.id],order:[a.order,y.required],title:[a.title,y.required],textContent:[a.textContent],duration:[a.duration,[y.required,y.min(1)]],mediaId:[a.mediaId],media:this.fb.group({url:[a.media?.url||""],type:[a.media?.type||""]})});a.media&&this.contentMediaFiles.set(this.contents.length,new File([],"existing-media",{type:a.media.type==="image"?"image/jpeg":a.media.type==="video"?"video/mp4":"application/octet-stream"})),this.contents.push(o)}}}}loadCategories(){this.categoryService.getAll().subscribe({next:e=>{this.categories=e},error:e=>{console.error("Error loading categories:",e),this.snackBar.open("Error loading categories","Close",{duration:3e3})}})}loadTags(){this.tagService.getAll().subscribe({next:e=>{this.tags=e},error:e=>{console.error("Error loading tags:",e),this.snackBar.open("Error loading tags","Close",{duration:3e3})}})}get contents(){return this.courseForm.get("contents")}get media(){return this.courseForm.get("media")}getMediaGroup(e){return e.get("media")}addContent(){this.contents.push(this.fb.group({order:[this.contents.length+1,y.required],title:["",y.required],textContent:[""],duration:[0,[y.required,y.min(1)]],media:this.fb.group({url:[""],type:[""]})}))}removeContent(e){this.contents.removeAt(e)}onSaveCourse(){return Y(this,null,function*(){if(!this.courseForm.valid){this.courseForm.markAllAsTouched(),this.snackBar.open("Please fill all required fields","Close",{duration:3e3});return}this.isLoading=!0;try{let e=this.courseForm.value,a;if(this.courseMediaFile)try{let v=yield this.mediaService.uploadFile(this.courseMediaFile).toPromise();if(!v)throw new Error("Failed to upload course media: Response is empty");a=v}catch(v){throw console.error("Error uploading course media:",v),new Error("Failed to upload course media")}else a={id:this.isEditMode&&this.existingMedia?this.existingMedia.id:0,url:this.courseForm.get("media.url")?.value||"",type:this.courseForm.get("media.type")?.value||""};let o={id:this.isEditMode&&this.courseId?this.courseId:0,title:e.title,description:e.description,categoryId:e.categoryId,duration:e.duration,price:e.price,language:e.language,isPublished:e.isPublished,companyId:e.companyId,mediaId:0,tags:e.tagIds?.length>0?e.tagIds.map(v=>({id:v})):void 0},d=e.contents?e.contents.map((v,T)=>Y(this,null,function*(){let E,Le=this.contentMediaFiles.get(T);if(Le)try{let X=yield this.mediaService.uploadFile(Le).toPromise();if(!X)throw new Error(`Failed to upload media for content ${T}: Response is empty`);E=X}catch(X){throw console.error(`Error uploading media for content ${T}:`,X),new Error(`Failed to upload media for content ${T}`)}else v.media?.url&&v.media?.type&&(E={id:v.mediaId||0,url:v.media.url,type:v.media.type});return{content:{id:v.id||0,order:v.order,title:v.title,textContent:v.textContent,duration:v.duration},contentMedia:E}})):[],u=yield Promise.all(d),C=[];if(this.isEditMode&&this.existingContents&&this.existingContents.length>0){let v=e.contents?e.contents.filter(E=>E.id).map(E=>E.id):[],T=this.existingContents.filter(E=>E.id&&!v.includes(E.id)).map(E=>E.id);C.push(...T)}let I={course:o,courseMedia:a,contents:u,contentIdsToDelete:C};if(!(yield this.courseService.saveComplete(I).toPromise()))throw new Error("Failed to save course");let S=this.isEditMode?"Course updated successfully!":"Course created successfully!";this.snackBar.open(S,"Close",{duration:3e3}),this.router.navigate(["/Courses"])}catch(e){console.error("Error saving course:",e),this.snackBar.open("Error saving course: "+(e.message||"Unknown error"),"Close",{duration:5e3})}finally{this.isLoading=!1}})}onDiscardCourse(){confirm("Are you sure you want to discard this course?")&&this.router.navigate(["/Courses"])}onFileSelected(e,a){let o=e.target;if(o.files&&o.files.length>0){let d=o.files[0];if(a!==void 0){this.contentMediaFiles.set(a,d);let u=this.contents.at(a);if(u){let C=this.getMediaGroup(u),I=d.type.startsWith("image")?"image":d.type.startsWith("video")?"video":"other";C.patchValue({type:I});let x=new FileReader;x.onload=()=>{let S=x.result;C.patchValue({url:S})},x.readAsDataURL(d)}}else{this.uploadedFile=d,this.courseMediaFile=d;let u=new FileReader;u.onload=()=>this.previewUrl=u.result,u.readAsDataURL(this.uploadedFile);let C=this.uploadedFile.type.startsWith("image")?"image":this.uploadedFile.type.startsWith("video")?"video":"other";this.media.patchValue({type:C})}}}isImageFile(e){if(e!==void 0){let a=this.contentMediaFiles.get(e);return a?a.type.startsWith("image"):!1}return this.uploadedFile?this.uploadedFile.type.startsWith("image"):!1}isVideoFile(e){if(e!==void 0){let a=this.contentMediaFiles.get(e);return a?a.type.startsWith("video"):!1}return this.uploadedFile?this.uploadedFile.type.startsWith("video"):!1}getMediaUrl(e){return e?this.mediaService.getFullUrl(e):""}static{this.\u0275fac=function(a){return new(a||t)(_(xe),_(q),_(be),_(Ie),_(oe),_(st),_(R),_(U),_(te))}}static{this.\u0275cmp=$({type:t,selectors:[["app-course-create"]],standalone:!1,decls:98,vars:18,consts:[["preview",""],["fileInput",""],["contentPreview",""],["contentFileInput",""],[1,"create-course-container"],[1,"header"],["mat-icon-button","","routerLink","/Courses"],[1,"title"],[1,"status-badge",3,"ngClass"],[1,"spacer"],[1,"actions"],["mat-stroked-button","",3,"click","disabled"],["mat-flat-button","","color","primary",3,"click","disabled"],["diameter","20","style","display: inline-block; margin-right: 8px;",4,"ngIf"],[1,"content-layout"],[1,"main-column"],[1,"card"],[1,"form-layout",3,"formGroup"],[1,"form-field"],["appearance","outline",1,"full-width"],["matInput","","formControlName","title","placeholder","e.g. Advanced Project Management"],["matInput","","formControlName","description","rows","4","placeholder","A short, engaging summary of what learners will achieve."],["formControlName","categoryId","placeholder","Select category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tagIds","multiple","","placeholder","Select tags"],["matInput","","type","number","formControlName","duration","min","1","placeholder","Course duration"],["matInput","","type","number","formControlName","price","min","0","placeholder","Course price"],["matInput","","formControlName","language","placeholder","e.g. Portugu\xEAs, English"],["formArrayName","contents"],["class","content-item",3,"formGroupName",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary","type","button",3,"click"],[1,"sidebar-column"],[3,"formGroup"],["formControlName","isPublished"],[1,"upload-container",3,"click"],[4,"ngIf","ngIfElse"],["type","file","hidden","","accept","image/*,video/*,application/pdf",3,"change"],["class","form-field",3,"formGroup",4,"ngIf"],[1,"mobile-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],["diameter","20",2,"display","inline-block","margin-right","8px"],[3,"value"],[1,"content-item",3,"formGroupName"],[1,"content-header"],["mat-icon-button","","color","warn","type","button","title","Remove content",3,"click"],["matInput","","type","number","formControlName","order","min","1"],["matInput","","formControlName","title","placeholder","Content title"],["matInput","","formControlName","textContent","rows","3"],["matInput","","type","number","formControlName","duration","min","1"],[1,"preview"],["alt","Preview","class","preview-image",3,"src",4,"ngIf"],["controls","",3,"src",4,"ngIf"],[4,"ngIf"],["alt","Preview",1,"preview-image",3,"src"],["controls","",3,"src"],[1,"form-field",3,"formGroup"],["matInput","","formControlName","type","placeholder","File type (e.g. image, video)"]],template:function(a,o){if(a&1){let d=k();i(0,"div",4)(1,"div",5)(2,"button",6)(3,"mat-icon"),r(4,"arrow_back"),n()(),i(5,"h1",7),r(6),n(),i(7,"div",8),r(8),n(),g(9,"div",9),i(10,"div",10)(11,"button",11),h("click",function(){return M(d),P(o.onDiscardCourse())}),r(12," Discard "),n(),i(13,"button",12),h("click",function(){return M(d),P(o.onSaveCourse())}),p(14,en,1,0,"mat-spinner",13),r(15),n()()(),i(16,"div",14)(17,"div",15)(18,"mat-card",16)(19,"mat-card-header")(20,"mat-card-title"),r(21,"Course Details"),n(),i(22,"mat-card-subtitle"),r(23,"Provide the main details for your new course."),n()(),i(24,"mat-card-content")(25,"form",17)(26,"div",18)(27,"mat-label"),r(28,"Title"),n(),i(29,"mat-form-field",19),g(30,"input",20),n()(),i(31,"div",18)(32,"mat-label"),r(33,"Description"),n(),i(34,"mat-form-field",19),g(35,"textarea",21),n()(),i(36,"div",18)(37,"mat-label"),r(38,"Category"),n(),i(39,"mat-form-field",19)(40,"mat-select",22),p(41,tn,2,2,"mat-option",23),n()()(),i(42,"div",18)(43,"mat-label"),r(44,"Tags"),n(),i(45,"mat-form-field",19)(46,"mat-select",24),p(47,nn,2,2,"mat-option",23),n()()(),i(48,"div",18)(49,"mat-label"),r(50,"Duration (minutes)"),n(),i(51,"mat-form-field",19),g(52,"input",25),n()(),i(53,"div",18)(54,"mat-label"),r(55,"Price (R$)"),n(),i(56,"mat-form-field",19),g(57,"input",26),n()(),i(58,"div",18)(59,"mat-label"),r(60,"Language"),n(),i(61,"mat-form-field",19),g(62,"input",27),n()(),i(63,"div",18)(64,"mat-label"),r(65,"Course Contents"),n(),i(66,"div",28),p(67,dn,41,4,"div",29),i(68,"button",30),h("click",function(){return M(d),P(o.addContent())}),r(69," Add Content "),n()()()()()()(),i(70,"div",31)(71,"mat-card",16)(72,"mat-card-header")(73,"mat-card-title"),r(74,"Course Status"),n()(),i(75,"mat-card-content")(76,"div",32)(77,"mat-slide-toggle",33),r(78,"Published"),n()()()(),i(79,"mat-card",16)(80,"mat-card-header")(81,"mat-card-title"),r(82,"Course Media"),n(),i(83,"mat-card-subtitle"),r(84,"Upload or select a cover image or video for your course."),n()(),i(85,"mat-card-content")(86,"div",34),h("click",function(){M(d);let C=B(91);return P(C.click())}),p(87,mn,5,0,"ng-container",35)(88,_n,4,3,"ng-template",null,0,se),n(),i(90,"input",36,1),h("change",function(C){return M(d),P(o.onFileSelected(C))}),n(),p(92,Cn,3,1,"div",37),n()()()(),i(93,"div",38)(94,"button",39),h("click",function(){return M(d),P(o.onDiscardCourse())}),r(95,"Discard"),n(),i(96,"button",40),h("click",function(){return M(d),P(o.onSaveCourse())}),r(97),n()()()}if(a&2){let d,u,C=B(89);c(6),f(o.isEditMode?"Edit Course":"New Course"),c(),s("ngClass",Z(16,Zt,(d=o.courseForm.get("isPublished"))==null?null:d.value)),c(),b(" ",(u=o.courseForm.get("isPublished"))!=null&&u.value?"Published":"Draft"," "),c(3),s("disabled",o.isLoading),c(2),s("disabled",o.isLoading),c(),s("ngIf",o.isLoading),c(),b(" ",o.isLoading?"Saving...":o.isEditMode?"Update Course":"Save Course"," "),c(10),s("formGroup",o.courseForm),c(16),s("ngForOf",o.categories),c(6),s("ngForOf",o.tags),c(20),s("ngForOf",o.contents.controls),c(9),s("formGroup",o.courseForm),c(11),s("ngIf",!o.previewUrl)("ngIfElse",C),c(5),s("ngIf",o.uploadedFile),c(5),f(o.isEditMode?"Update Course":"Save Course")}},dependencies:[le,G,z,_e,ue,Ce,pe,ge,ve,fe,he,Xe,Ye,ne,Pe,Me,ye,N,me,H,Q,J,ie,W,A,Ee,Se,K],styles:[".create-course-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1.5rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0;font-family:Poppins,sans-serif}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:9999px;border:1px solid rgba(0,0,0,.12);font-size:.75rem}.spacer[_ngcontent-%COMP%]{flex:1}.actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.content-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 250px;gap:1.5rem}.main-column[_ngcontent-%COMP%], .sidebar-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.card[_ngcontent-%COMP%]{width:100%}.form-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.full-width[_ngcontent-%COMP%]{width:100%}.text-left[_ngcontent-%COMP%]{text-align:left}.ai-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.upload-container[_ngcontent-%COMP%]{height:128px;border:2px dashed rgba(0,0,0,.12);border-radius:.375rem;background-color:#0000000a;display:flex;align-items:center;justify-content:center;cursor:pointer}.upload-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;height:2rem;width:2rem;color:#0006}.mobile-actions[_ngcontent-%COMP%]{display:none;margin-top:1.5rem;gap:.75rem;justify-content:center}@media (max-width: 768px){.content-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.actions[_ngcontent-%COMP%]{display:none}.mobile-actions[_ngcontent-%COMP%]{display:flex}}.status-badge.published[_ngcontent-%COMP%]{background-color:#e0f7e9;border-color:#4caf50;color:#2e7d32}.content-item[_ngcontent-%COMP%]{margin-bottom:1rem;padding:.5rem}.content-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.upload-container[_ngcontent-%COMP%]{height:160px;border:2px dashed rgba(0,0,0,.2);border-radius:8px;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#00000080;cursor:pointer;text-align:center;transition:border-color .2s ease}.upload-container[_ngcontent-%COMP%]:hover{border-color:#3f51b5;color:#3f51b5}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .preview[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-height:140px;border-radius:6px}.preview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:.9rem}.content-item[_ngcontent-%COMP%]{margin-bottom:1rem;transition:transform .2s ease}",fn]})}}return t})(),pi=(()=>{class t{constructor(e,a,o,d,u){this.route=e,this.router=a,this.courseService=o,this.mediaService=d,this.snackBar=u,this.course=null,this.courseContents=[],this.isLoading=!0,this.selectedContent=null}ngOnInit(){this.route.params.subscribe(e=>{e.courseId?(this.courseId=+e.courseId,this.route.queryParams.subscribe(a=>{let o=a.contentId?+a.contentId:null;this.loadCourseData(this.courseId,o)})):(this.snackBar.open("Course ID not provided","Close",{duration:3e3}),this.router.navigate(["/Courses"]))})}loadCourseData(e,a=null){this.isLoading=!0,this.courseService.getById(e).pipe(w(o=>{this.course=o;let d=o.mediaId?this.mediaService.getById(o.mediaId).pipe(D(()=>O(null))):O(null),u=this.courseService.getContents(e).pipe(D(()=>(console.error("Error loading course contents"),O([]))),w(C=>{if(this.courseContents=C.sort((x,S)=>x.order-S.order),a&&this.courseContents.length>0){let x=this.courseContents.find(S=>S.id===a);x?this.selectedContent=x:this.selectedContent=this.courseContents[0]}else this.courseContents.length>0&&!this.selectedContent&&(this.selectedContent=this.courseContents[0]);let I=this.courseContents.filter(x=>x.mediaId).map(x=>this.mediaService.getById(x.mediaId).pipe(D(()=>O(null)),w(S=>{if(S){let v=this.courseContents.findIndex(T=>T.id===x.id);v>=0&&(this.courseContents[v].media=S)}return O(null)})));return I.length>0?L(I):O(null)}));return L({courseMedia:d,contents:u})})).subscribe({next:({courseMedia:o})=>{o&&this.course&&(this.course.media=o),this.isLoading=!1},error:o=>{console.error("Error loading course:",o),this.snackBar.open("Error loading course","Close",{duration:3e3}),this.isLoading=!1,this.router.navigate(["/Courses"])}})}selectContent(e){this.selectedContent=e,window.scrollTo({top:0,behavior:"smooth"}),this.router.navigate([],{relativeTo:this.route,queryParams:{contentId:e.id},queryParamsHandling:"merge"})}getMediaUrl(e){return e?this.mediaService.getFullUrl(e):""}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}playVideo(e){if(e.stopPropagation(),this.videoElement&&this.videoElement.nativeElement){let a=this.videoElement.nativeElement;this.isVideoPlaying(a)?a.pause():a.play()}}navigateContent(e){if(!this.selectedContent||this.courseContents.length===0)return;let a=this.courseContents.findIndex(d=>d.id===this.selectedContent?.id);if(a===-1)return;let o;e==="next"?o=a+1>=this.courseContents.length?0:a+1:o=a-1<0?this.courseContents.length-1:a-1,this.selectContent(this.courseContents[o]),this.router.navigate([],{relativeTo:this.route,queryParams:{contentId:this.courseContents[o].id},queryParamsHandling:"merge"})}static{this.\u0275fac=function(a){return new(a||t)(_(te),_(R),_(q),_(oe),_(U))}}static{this.\u0275cmp=$({type:t,selectors:[["app-course-detail"]],viewQuery:function(a,o){if(a&1&&ze(hn,5),a&2){let d;Re(d=Ue())&&(o.videoElement=d.first)}},standalone:!1,decls:3,vars:3,consts:[["videoElement",""],["class","course-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","not-found-container",4,"ngIf"],[1,"course-container"],[1,"course-main"],[1,"video-container"],["class","media-placeholder",4,"ngIf"],["class","media-placeholder no-media",4,"ngIf"],[1,"course-info"],[1,"course-title"],["class","lesson-title",4,"ngIf"],["class","course-meta",4,"ngIf"],["class","tags-container",4,"ngIf"],["class","lesson-content",4,"ngIf"],["class","course-description",4,"ngIf"],[1,"course-sidebar"],[1,"sidebar-header"],[1,"content-count"],[1,"contents-list"],["class","content-item",3,"active","click",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-flat-button","","color","primary","routerLink","/Courses",1,"back-button"],["mat-stroked-button","",3,"routerLink",4,"ngIf"],[1,"media-placeholder"],["alt","Content media","class","content-media",3,"src",4,"ngIf"],["controls","","class","content-media",3,"src",4,"ngIf"],["class","play-button",3,"click",4,"ngIf"],["alt","Content media",1,"content-media",3,"src"],["controls","",1,"content-media",3,"src"],[1,"play-button",3,"click"],["alt","Course thumbnail",1,"course-thumbnail",3,"src"],[1,"media-placeholder","no-media"],[1,"lesson-title"],[1,"course-meta"],[1,"category"],[1,"duration"],["class","language",4,"ngIf"],[1,"language"],[1,"tags-container"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"lesson-content"],[1,"content-text",3,"innerHTML"],[1,"duration-info"],[1,"content-navigation"],["mat-button","","color","primary",3,"click"],[1,"course-description"],[1,"description-text",3,"innerHTML"],[1,"content-item",3,"click"],[1,"content-item-inner"],[1,"content-icon"],[4,"ngIf"],[1,"content-details"],[1,"content-title"],[1,"content-duration"],["mat-stroked-button","",3,"routerLink"],[1,"loading-container"],[1,"not-found-container"],[1,"not-found-icon"],["mat-flat-button","","color","primary","routerLink","/Courses"]],template:function(a,o){a&1&&p(0,jn,26,12,"div",1)(1,Nn,4,0,"div",2)(2,Bn,9,0,"div",3),a&2&&(s("ngIf",!o.isLoading&&o.course),c(),s("ngIf",o.isLoading),c(),s("ngIf",!o.isLoading&&!o.course))},dependencies:[G,z,ne,N,A,K,Te,De],styles:[".course-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 1fr;gap:2rem;max-width:1200px;margin:0 auto;padding:2rem}.course-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.video-container[_ngcontent-%COMP%]{position:relative;aspect-ratio:16/9;overflow:hidden;border-radius:.5rem}.video-placeholder[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.video-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.play-button[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background-color:#0006;cursor:pointer}.play-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:5rem;height:5rem;width:5rem;color:#ffffffb3;transition:color .2s}.play-button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#fff}.course-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;font-family:Poppins,sans-serif;margin-bottom:.5rem}.lesson-title[_ngcontent-%COMP%]{color:#0009;font-size:1.1rem}.lesson-content[_ngcontent-%COMP%]{max-width:100%}.lesson-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:1rem;font-family:Poppins,sans-serif}.lesson-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;line-height:1.6}.course-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;font-family:Poppins,sans-serif;margin:0}.completion-status[_ngcontent-%COMP%]{font-size:.875rem;color:#0009}.modules-accordion[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);border-radius:.5rem;overflow:hidden}.lesson-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;height:auto!important;padding:.5rem 0}.completed-icon[_ngcontent-%COMP%]{color:var(--primary)}.incomplete-icon[_ngcontent-%COMP%]{color:#0000004d}.lesson-duration[_ngcontent-%COMP%]{margin-left:auto;font-size:.75rem;color:#0009}.back-button[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 768px){.course-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}.media-placeholder[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;border-radius:.5rem}.media-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .media-placeholder[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.media-placeholder.no-media[_ngcontent-%COMP%]{flex-direction:column;color:#00000080}.media-placeholder.no-media[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;height:3rem;width:3rem;margin-bottom:1rem}.content-media[_ngcontent-%COMP%], .course-thumbnail[_ngcontent-%COMP%]{max-width:100%}.course-info[_ngcontent-%COMP%]{margin-bottom:1.5rem}.course-meta[_ngcontent-%COMP%]{display:flex;gap:1rem;color:#0009;margin-top:.5rem}.tags-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.tag[_ngcontent-%COMP%]{background-color:#e0e0e0;padding:.25rem .75rem;border-radius:1rem;font-size:.875rem;color:#000000b3}.content-item[_ngcontent-%COMP%]{cursor:pointer;padding:.75rem 1rem;border-radius:.25rem;transition:background-color .2s;margin-bottom:.5rem}.content-item.active[_ngcontent-%COMP%]{background-color:#0000000d}.content-item-inner[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;gap:1rem}.content-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#0009}.content-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.content-title[_ngcontent-%COMP%]{font-weight:500}.content-duration[_ngcontent-%COMP%]{font-size:.75rem;color:#0009}.contents-list[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto;padding:0}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh;gap:1.5rem}.not-found-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh;gap:1rem;text-align:center}.not-found-icon[_ngcontent-%COMP%]{font-size:4rem;height:4rem;width:4rem;color:#0006}.course-description[_ngcontent-%COMP%], .lesson-content[_ngcontent-%COMP%]{line-height:1.6}.duration-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#0009;margin-top:1.5rem}.content-count[_ngcontent-%COMP%]{font-size:.875rem;color:#0009}.content-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.1)}"]})}}return t})(),gi=(()=>{class t{constructor(e,a,o,d,u,C,I,x){this.courseService=e,this.categoryService=a,this.tagService=o,this.authService=d,this.fb=u,this.snackBar=C,this.router=I,this.dialog=x,this.courses=[],this.categories=[],this.tags=[],this.languages=[],this.uniqueLanguages=new Set,this.isLoading=!0,this.totalCourses=0,this.pageSize=6,this.currentPage=0,this.pageSizeOptions=[6,12,24,48]}ngOnInit(){this.initForm(),this.loadCurrentUser(),this.loadFilterData()}initForm(){this.searchForm=this.fb.group({searchTerm:[""],categoryId:[null],language:[""],tagIds:[[]],minPrice:[null],maxPrice:[null]})}loadCurrentUser(){let e=this.authService.getCurrentUser();e?(this.userRole=e.role||"",this.userRole!=="Company"?(this.snackBar.open("Voc\xEA n\xE3o tem permiss\xE3o para acessar esta p\xE1gina.","Fechar",{duration:3e3}),this.router.navigate(["/Dashboard"])):this.searchCourses()):(this.snackBar.open("Voc\xEA precisa estar logado para acessar esta p\xE1gina.","Fechar",{duration:3e3}),this.router.navigate(["/Login"]))}loadFilterData(){L({categories:this.categoryService.getAll(),tags:this.tagService.getAll()}).subscribe({next:e=>{this.categories=e.categories,this.tags=e.tags},error:e=>{console.error("Erro ao carregar dados de filtro:",e)}})}searchCourses(){this.isLoading=!0;let e=Ve($e({},this.searchForm.value),{onlyPublished:!0,page:this.currentPage+1,pageSize:this.pageSize});this.courseService.searchCourses(e).subscribe({next:a=>{this.courses=a.courses,this.totalCourses=a.totalCount,this.courses.forEach(o=>{o.language&&this.uniqueLanguages.add(o.language)}),this.languages=Array.from(this.uniqueLanguages).sort(),this.isLoading=!1},error:a=>{console.error("Erro ao buscar cursos:",a),this.snackBar.open("Erro ao buscar cursos. Tente novamente.","Fechar",{duration:3e3}),this.isLoading=!1}})}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.searchCourses()}onFilterChange(){this.currentPage=0,this.searchCourses()}resetFilters(){this.searchForm.reset({searchTerm:"",categoryId:null,language:"",tagIds:[],minPrice:null,maxPrice:null}),this.currentPage=0,this.searchCourses()}viewCourse(e){this.router.navigate(["/course-details",e])}static{this.\u0275fac=function(a){return new(a||t)(_(q),_(be),_(Ie),_(Oe),_(xe),_(U),_(R),_(we))}}static{this.\u0275cmp=$({type:t,selectors:[["app-course-catalog"]],standalone:!1,decls:56,vars:8,consts:[[1,"catalog-container"],[1,"filter-section"],[3,"change","formGroup"],[1,"filter-form"],["appearance","outline"],["matInput","","formControlName","searchTerm","placeholder","Digite um termo para busca"],["matPrefix",""],["formControlName","categoryId"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","language"],["formControlName","tagIds","multiple",""],["matInput","","type","number","min","0","formControlName","minPrice"],["matInput","","type","number","min","0","formControlName","maxPrice"],[1,"filter-actions"],["mat-stroked-button","","color","warn","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click"],["class","search-results",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"search-results"],["class","course-grid",4,"ngIf"],["class","no-courses",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","pageIndex","page",4,"ngIf"],[1,"course-grid"],["class","course-card",4,"ngFor","ngForOf"],[1,"course-card"],["mat-card-image","","class","course-image",3,"src","alt",4,"ngIf"],["mat-card-image","","src","assets/images/course-placeholder.jpg","alt","Imagem do curso","class","course-image",4,"ngIf"],[1,"course-details"],[4,"ngIf"],[1,"course-tags"],[4,"ngFor","ngForOf"],[1,"course-price"],["mat-button","","color","primary",3,"click"],["mat-card-image","",1,"course-image",3,"src","alt"],["mat-card-image","","src","assets/images/course-placeholder.jpg","alt","Imagem do curso",1,"course-image"],[1,"no-courses"],["mat-stroked-button","","color","primary",3,"click"],[3,"page","length","pageSize","pageSizeOptions","pageIndex"],[1,"loading-container"],["diameter","50"]],template:function(a,o){a&1&&(i(0,"div",0)(1,"h1"),r(2,"Cat\xE1logo de Cursos"),n(),i(3,"div",1)(4,"h2"),r(5,"Filtrar Cursos"),n(),i(6,"form",2),h("change",function(){return o.onFilterChange()}),i(7,"div",3)(8,"mat-form-field",4)(9,"mat-label"),r(10,"Buscar cursos"),n(),g(11,"input",5),i(12,"mat-icon",6),r(13,"search"),n()(),i(14,"mat-form-field",4)(15,"mat-label"),r(16,"Categoria"),n(),i(17,"mat-select",7)(18,"mat-option",8),r(19,"Todas as categorias"),n(),p(20,zn,2,2,"mat-option",9),n()(),i(21,"mat-form-field",4)(22,"mat-label"),r(23,"Idioma"),n(),i(24,"mat-select",10)(25,"mat-option",8),r(26,"Todos os idiomas"),n(),p(27,Rn,2,2,"mat-option",9),n()(),i(28,"mat-form-field",4)(29,"mat-label"),r(30,"Tags"),n(),i(31,"mat-select",11),p(32,Un,2,2,"mat-option",9),n()(),i(33,"mat-form-field",4)(34,"mat-label"),r(35,"Pre\xE7o m\xEDnimo"),n(),g(36,"input",12),i(37,"mat-icon",6),r(38,"attach_money"),n()(),i(39,"mat-form-field",4)(40,"mat-label"),r(41,"Pre\xE7o m\xE1ximo"),n(),g(42,"input",13),i(43,"mat-icon",6),r(44,"attach_money"),n()()(),i(45,"div",14)(46,"button",15),h("click",function(){return o.resetFilters()}),i(47,"mat-icon"),r(48,"clear"),n(),r(49," Limpar filtros "),n(),i(50,"button",16),h("click",function(){return o.searchCourses()}),i(51,"mat-icon"),r(52,"search"),n(),r(53," Buscar "),n()()()(),p(54,Xn,6,4,"div",17)(55,Yn,4,0,"div",18),n()),a&2&&(c(6),s("formGroup",o.searchForm),c(12),s("value",null),c(2),s("ngForOf",o.categories),c(5),s("value",""),c(2),s("ngForOf",o.languages),c(5),s("ngForOf",o.tags),c(22),s("ngIf",!o.isLoading),c(),s("ngIf",o.isLoading))},dependencies:[G,z,_e,ue,Ce,pe,ge,ve,fe,he,Pe,Me,ot,ye,N,H,tt,Q,J,nt,ie,W,A,Pt,Ee,Se,Fe,ke,K,Ge,de],styles:[".catalog-container[_ngcontent-%COMP%]{padding:20px}.filter-section[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:8px;padding:16px;margin-bottom:20px}.filter-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}@media (max-width: 960px){.filter-form[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media (max-width: 600px){.filter-form[_ngcontent-%COMP%]{grid-template-columns:1fr}}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}.course-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-top:20px}.course-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.course-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]{flex-grow:1}.course-card[_ngcontent-%COMP%]   .course-image[_ngcontent-%COMP%]{height:180px;object-fit:cover;width:100%}.course-card[_ngcontent-%COMP%]   .course-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;margin-top:10px}.course-card[_ngcontent-%COMP%]   .course-price[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;color:#4caf50;margin-top:10px}.course-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]{margin-top:auto}.loading-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ffffffb3;display:flex;align-items:center;justify-content:center;z-index:999}.no-courses[_ngcontent-%COMP%]{text-align:center;padding:40px 0}.no-courses[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#9e9e9e}.no-courses[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:16px;color:#616161}"]})}}return t})(),_i=(()=>{class t{constructor(e,a){this.dialogRef=e,this.data=a}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static{this.\u0275fac=function(a){return new(a||t)(_(bt),_(It))}}static{this.\u0275cmp=$({type:t,selectors:[["app-confirm-dialog"]],standalone:!1,decls:10,vars:4,consts:[["mat-dialog-content",""],["mat-dialog-title",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","color","primary",3,"click"]],template:function(a,o){a&1&&(i(0,"div",0)(1,"h2",1),r(2),n(),i(3,"p"),r(4),n()(),i(5,"div",2)(6,"button",3),h("click",function(){return o.onCancel()}),r(7),n(),i(8,"button",4),h("click",function(){return o.onConfirm()}),r(9),n()()),a&2&&(c(2),f(o.data.title),c(2),f(o.data.message),c(3),f(o.data.cancelText||"Cancelar"),c(2),f(o.data.confirmText||"Confirmar"))},dependencies:[N,St,wt,Et],encapsulation:2})}}return t})(),Ci=(()=>{class t{constructor(e,a,o,d,u,C){this.courseService=e,this.authService=a,this.route=o,this.router=d,this.dialog=u,this.snackBar=C,this.isLoading=!0,this.courseOwned=!1}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadCourse(e):(this.errorMessage="ID do curso n\xE3o especificado",this.isLoading=!1)}loadCourse(e){this.isLoading=!0,this.courseService.getCourse(parseInt(e)).subscribe({next:a=>{this.course=a,this.checkCourseOwnership(e)},error:a=>{console.error("Erro ao carregar o curso:",a),this.errorMessage="N\xE3o foi poss\xEDvel carregar o curso. Por favor, tente novamente mais tarde.",this.isLoading=!1}})}checkCourseOwnership(e){let a=this.authService.getCurrentUser();a&&a.companyId?this.courseService.isCourseOwnedByCompany(parseInt(e),a.companyId).subscribe({next:o=>{this.courseOwned=o,this.isLoading=!1},error:o=>{console.error("Erro ao verificar propriedade do curso:",o),this.courseOwned=!1,this.isLoading=!1}}):(this.courseOwned=!1,this.isLoading=!1)}purchaseCourse(){let e=this.authService.getCurrentUser();if(!e||e.role!=="Company"){this.snackBar.open("Voc\xEA precisa estar logado como empresa para comprar este curso.","Fechar",{duration:5e3});return}this.dialog.open(_i,{data:{title:"Confirmar Compra",message:`Deseja realmente adquirir o curso "${this.course.title}" por R$ ${this.course.price.toFixed(2)}?`,confirmText:"Comprar",cancelText:"Cancelar"}}).afterClosed().subscribe(o=>{if(o){this.isLoading=!0;let d=this.course.id||0,u=e.companyId||0;this.courseService.purchaseCourse(d,u).subscribe({next:C=>{this.snackBar.open("Curso adquirido com sucesso!","Fechar",{duration:5e3}),this.courseOwned=!0,this.isLoading=!1},error:C=>{console.error("Erro ao comprar o curso:",C),this.snackBar.open("Ocorreu um erro ao adquirir o curso. Por favor, tente novamente.","Fechar",{duration:5e3}),this.isLoading=!1}})}})}goBackToCatalog(){this.router.navigate(["/course-catalog"])}static{this.\u0275fac=function(a){return new(a||t)(_(q),_(Oe),_(te),_(R),_(we),_(U))}}static{this.\u0275cmp=$({type:t,selectors:[["app-course-details"]],standalone:!1,decls:9,vars:3,consts:[[1,"course-details-container"],[1,"back-button"],["mat-stroked-button","",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","course-content",4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"error-container"],["color","warn"],["mat-raised-button","","color","primary",3,"click"],[1,"course-content"],[1,"course-header"],[1,"course-image"],[3,"src","alt",4,"ngIf"],["src","assets/images/course-placeholder.jpg","alt","Imagem do curso",4,"ngIf"],[1,"course-header-info"],[1,"course-metadata"],[4,"ngIf"],[1,"course-tags"],[4,"ngFor","ngForOf"],[1,"purchase-section"],[1,"course-price"],[1,"purchase-actions"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","course-owned",4,"ngIf"],[1,"course-description"],["class","course-content-list",4,"ngIf"],[3,"src","alt"],["src","assets/images/course-placeholder.jpg","alt","Imagem do curso"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"course-owned"],["color","accent"],[1,"course-content-list"],["mat-list-icon",""],["mat-line",""],["mat-line","",4,"ngIf"]],template:function(a,o){a&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return o.goBackToCatalog()}),i(3,"mat-icon"),r(4,"arrow_back"),n(),r(5," Voltar ao Cat\xE1logo "),n()(),p(6,Zn,4,0,"div",3)(7,ei,7,1,"div",4)(8,mi,37,15,"div",5),n()),a&2&&(c(6),s("ngIf",o.isLoading),c(),s("ngIf",!o.isLoading&&o.errorMessage),c(),s("ngIf",!o.isLoading&&!o.errorMessage&&o.course))},dependencies:[G,z,N,H,Q,J,W,A,Fe,ke,K,Te,De,de],styles:[".course-details-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.course-details-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-bottom:2rem}.course-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%], .course-details-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;text-align:center}.course-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .course-details-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:1rem}.course-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .course-details-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#666}.course-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .course-details-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;color:#666}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]{display:flex;margin-bottom:2rem;gap:2rem}@media (max-width: 768px){.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]{flex-direction:column}}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-image[_ngcontent-%COMP%]{flex:0 0 300px}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:300px;object-fit:cover;border-radius:8px;box-shadow:0 4px 6px #0000001a}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]{flex:1}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;color:#333}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .course-metadata[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1rem}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .course-metadata[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;color:#666}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .course-metadata[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem;color:#555}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .course-tags[_ngcontent-%COMP%]{margin-bottom:1.5rem}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .course-tags[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{margin-right:.5rem;margin-bottom:.5rem}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:2rem;padding:1rem;background-color:#f9f9f9;border-radius:8px}@media (max-width: 768px){.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%]   .course-price[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:14px;color:#666}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%]   .course-price[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2e7d32;font-size:1.8rem}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%]   .purchase-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%]   .purchase-actions[_ngcontent-%COMP%]   .course-owned[_ngcontent-%COMP%]{display:flex;align-items:center;color:#1976d2;font-weight:500}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-header[_ngcontent-%COMP%]   .course-header-info[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%]   .purchase-actions[_ngcontent-%COMP%]   .course-owned[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-description[_ngcontent-%COMP%], .course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-content-list[_ngcontent-%COMP%]{margin-bottom:2rem}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-description[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], .course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-content-list[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-description[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], .course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-content-list[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{color:#555;line-height:1.6}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-content-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:auto;padding:1rem 0}.course-details-container[_ngcontent-%COMP%]   .course-content[_ngcontent-%COMP%]   .course-content-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #eee}"]})}}return t})(),fi=[{path:"",component:ui},{path:"create",component:Bt},{path:"edit/:courseId",component:Bt},{path:"detail/:courseId",component:pi},{path:"catalog",component:gi},{path:"details/:id",component:Ci}],ao=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=Ne({type:t})}static{this.\u0275inj=je({imports:[He,Ze,et,We,lt,Qe.forChild(fi),rt,at,Je,it,Ke,xt,yt,Ot,Ft,Mt,kt,ct,Tt,Dt,jt,Nt]})}}return t})();export{ao as CoursesModule};
