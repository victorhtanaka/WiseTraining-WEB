import{a as T,j as L}from"./chunk-3T3Z5BFP.js";import{b as re,c as ne}from"./chunk-IBRRAY2N.js";import{c as ie}from"./chunk-P7CFY6IH.js";import{Ad as W,Bd as J,Ca as r,Cd as K,Da as i,Dd as Q,Ea as d,Gb as O,Gd as X,Hb as R,Hc as M,Ic as V,Id as Y,J as B,Jb as H,Ka as x,Kd as I,La as p,Ld as P,Od as Z,Rd as k,Sd as ee,Ta as o,Ua as h,Vd as N,Wd as te,a as G,b as U,ed as $,fa as l,gd as j,hd as z,ja as s,jd as C,ld as m,ma as b,na as q,ob as v,od as S,pd as E,ra as f,rd as _,sb as A,ta as c,td as y,wd as F,yd as w}from"./chunk-346T4PMV.js";function oe(t,g){if(t&1&&(r(0,"mat-error"),o(1),i()),t&2){let e=p();l(),h(e.getEmailError())}}function ae(t,g){if(t&1&&(r(0,"mat-error"),o(1),i()),t&2){let e=p();l(),h(e.getPasswordError())}}function me(t,g){if(t&1&&(r(0,"mat-error"),o(1),i()),t&2){let e=p();l(),h(e.getUsernameError())}}function le(t,g){if(t&1&&(r(0,"mat-error"),o(1),i()),t&2){let e=p();l(),h(e.getPasswordError())}}function se(t,g){t&1&&(r(0,"mat-error"),o(1," Full Name is required "),i())}function ce(t,g){t&1&&(r(0,"mat-error"),o(1," Full Name must not exceed 100 characters "),i())}var de=(()=>{class t{constructor(e,n,a,u){this.fb=e,this.userService=n,this.router=a,this.authService=u,this.loading=!1,this.loginForm=this.fb.group({email:this.fb.control("",[m.required,m.email]),passwordHash:this.fb.control("",[m.required,m.minLength(8),m.maxLength(30)])})}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.userService.login(this.loginForm.value).subscribe({next:e=>{this.authService.authenticate(e.token),this.router.navigate(["/Dashboard"])}})}getEmailError(){let e=this.loginForm.get("email");return e?.hasError("required")?"Email \xE9 obrigat\xF3rio":e?.hasError("email")?"Email inv\xE1lido":null}getPasswordError(){let e=this.loginForm.get("passwordHash");return e?.hasError("required")?"A senha \xE9 obrigat\xF3ria":e?.hasError("minlength")?"M\xEDnimo de 8 caracteres":e?.hasError("maxlength")?"M\xE1ximo de 30 caracteres":null}onGoogleLogin(){this.authService.getFirebaseToken().then(e=>{e&&this.userService.loginGoogle(e).subscribe(n=>{this.authService.authenticate(n.token),this.router.navigate(["/Dashboard"])})})}static{this.\u0275fac=function(n){return new(n||t)(s(w),s(L),s(O),s(T))}}static{this.\u0275cmp=b({type:t,selectors:[["app-login"]],standalone:!1,decls:28,vars:3,consts:[[1,"gradient-line"],[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"subtitle"],[1,"form",3,"ngSubmit","formGroup"],["appearance","outline"],["type","text","matInput","","formControlName","email"],["matSuffix",""],[4,"ngIf"],["type","password","matInput","","formControlName","passwordHash"],[1,"form-actions"],["type","submit","mat-flat-button","","color","primary"],["routerLink","/",1,"back-link"]],template:function(n,a){n&1&&(d(0,"div",0),r(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),o(5,"Welcome Back"),i(),r(6,"p",4),o(7,"Sign in to your WiseTraining account"),i()(),r(8,"form",5),x("ngSubmit",function(){return a.onSubmit()}),r(9,"mat-form-field",6)(10,"mat-label"),o(11,"Email"),i(),d(12,"input",7),r(13,"mat-icon",8),o(14,"email"),i(),f(15,oe,2,1,"mat-error",9),i(),r(16,"mat-form-field",6)(17,"mat-label"),o(18,"Password"),i(),d(19,"input",10),r(20,"mat-icon",8),o(21,"lock"),i(),f(22,ae,2,1,"mat-error",9),i(),r(23,"div",11)(24,"button",12),o(25,"Sign In"),i(),r(26,"a",13),o(27,"Back to Home"),i()()()()()),n&2&&(l(8),c("formGroup",a.loginForm),l(7),c("ngIf",a.getEmailError()),l(7),c("ngIf",a.getPasswordError()))},dependencies:[v,_,C,S,E,y,F,R,M,k,I,P,Z,N,j],styles:[".form[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:1.25rem}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f9f9fb}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 24px #0000001a;width:100%;max-width:450px;padding:2.5rem;margin:2rem}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:600;margin-bottom:.5rem;background:linear-gradient(90deg,#f0be6e,#5e57c7 61%,#7f30b8);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.login-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;margin-top:1rem}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:1rem;font-weight:500;background:linear-gradient(90deg,#5e57c7,#7f30b8)}.form-actions[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:#6b7280;text-decoration:none;font-size:.9rem}.form-actions[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.gradient-line[_ngcontent-%COMP%]{width:100%;height:4px;position:fixed;background:linear-gradient(90deg,#f0be6e,#5e57c7 61%,#7f30b8)}"]})}}return t})(),ue=(()=>{class t{constructor(e,n,a,u){this.fb=e,this.userService=n,this.router=a,this.authService=u,this.registerForm=this.fb.group({fullName:this.fb.control("",[m.required,m.minLength(3),m.maxLength(15)]),passwordHash:this.fb.control("",[m.required,m.minLength(8),m.maxLength(30)]),email:this.fb.control("",[m.required,m.maxLength(30)])})}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.userService.register(this.registerForm.value,!1).subscribe(e=>{this.authService.authenticate(e.token),this.router.navigate(["/Dashboard"])})}getUsernameError(){let e=this.registerForm.get("fullName");return e?.hasError("required")?"Nome de usu\xE1rio \xE9 obrigat\xF3rio":e?.hasError("minlength")?"M\xEDnimo 3 caracteres":e?.hasError("maxlength")?"M\xE1ximo de 15 caracteres":null}getPasswordError(){let e=this.registerForm.get("passwordHash");return e?.hasError("required")?"Senha \xE9 obrigat\xF3ria":e?.hasError("minlength")?"M\xEDnimo 8 caracteres":e?.hasError("maxlength")?"M\xE1ximo de 30 caracteres":null}onGoogleLogin(){this.authService.getFirebaseToken().then(e=>{e&&this.userService.loginGoogle(e).subscribe(n=>{this.authService.authenticate(n.token),this.router.navigate(["/"])})})}static{this.\u0275fac=function(n){return new(n||t)(s(w),s(L),s(O),s(T))}}static{this.\u0275cmp=b({type:t,selectors:[["app-register"]],standalone:!1,decls:29,vars:3,consts:[[1,"register"],[1,"register-container"],[1,"register-left"],[1,"register-header"],[1,"fs-2","fw-medium"],[1,"fs-6",2,"color","rgb(140, 140, 140)"],[1,"register-form",3,"ngSubmit","formGroup"],["type","text","matInput","","formControlName","fullName"],[4,"ngIf"],["type","email","matInput","","formControlName","email"],["type","password","matInput","","formControlName","passwordHash","placeholder","Ex. pat@example.com"],["type","submit","mat-stroked-button","",2,"background-color","var(--primary-color)","color","white"],[1,"register-image"],["src","assets/images/register-company.jpg","alt","Register Image"]],template:function(n,a){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),o(5,"Cadastrar Empresa"),i(),r(6,"h3",5),o(7,"Preencha suas informa\xE7\xF5es para criar uma conta"),i()(),r(8,"form",6),x("ngSubmit",function(){return a.onSubmit()}),r(9,"mat-form-field")(10,"mat-label"),o(11,"Nome de usu\xE1rio"),i(),d(12,"input",7),f(13,me,2,1,"mat-error",8),i(),r(14,"mat-form-field")(15,"mat-label"),o(16,"Email"),i(),d(17,"input",9),i(),r(18,"mat-form-field")(19,"mat-label"),o(20,"Senha"),i(),d(21,"input",10),f(22,le,2,1,"mat-error",8),i(),r(23,"mat-checkbox"),o(24,"Li e concordo com os termos e condi\xE7\xF5es"),i(),r(25,"button",11),o(26,"Criar conta"),i()()(),r(27,"div",12),d(28,"img",13),i()()()),n&2&&(l(8),c("formGroup",a.registerForm),l(5),c("ngIf",a.getUsernameError()),l(9),c("ngIf",a.getPasswordError()))},dependencies:[v,_,C,S,E,y,F,M,k,I,P,N,re],styles:[".register[_ngcontent-%COMP%]{background-color:var(--background-color);display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.register-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80vw;height:85vh;box-shadow:0 2px 10px #0000001a;background-color:#fff;border-radius:8px}.register-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100%;width:60%;background-color:#fff;padding:30px;border-radius:8px}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:20rem}.register-image[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;justify-content:center;align-items:center;background-color:var(--primary-color);border-top-right-radius:8px;border-bottom-right-radius:8px}"]})}}return t})(),fe=(()=>{class t{constructor(e,n,a){this.fb=e,this.userService=n,this.snackBar=a,this.user=null,this.isLoading=!1}ngOnInit(){this.initForm(),this.loadUserProfile()}initForm(){this.profileForm=this.fb.group({id:[0],email:[{value:"",disabled:!0}],fullName:["",[m.required,m.maxLength(100)]],passwordHash:[""]})}loadUserProfile(){this.isLoading=!0,this.userService.getAuthenticatedUser().subscribe({next:e=>{this.user=e,this.profileForm.patchValue({id:e.id,email:e.email,fullName:e.fullName}),this.isLoading=!1},error:e=>{this.snackBar.open("Error loading profile: "+e.message,"Close",{duration:3e3}),this.isLoading=!1}})}onSubmit(){if(this.profileForm.valid){this.isLoading=!0;let e=U(G({},this.profileForm.getRawValue()),{email:this.profileForm.get("email")?.value});this.userService.put(e).subscribe({next:()=>{this.snackBar.open("Profile updated successfully!","Close",{duration:3e3}),this.isLoading=!1},error:n=>{this.snackBar.open("Error updating profile: "+n.message,"Close",{duration:3e3}),this.isLoading=!1}})}}static{this.\u0275fac=function(n){return new(n||t)(s(w),s(L),s($))}}static{this.\u0275cmp=b({type:t,selectors:[["app-user-profile"]],standalone:!1,decls:22,vars:4,consts:[[1,"container"],[3,"ngSubmit","formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","email","type","email","readonly",""],["matInput","","formControlName","fullName","type","text"],[4,"ngIf"],[1,"button-row"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,a){if(n&1&&(r(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),o(4,"My Profile"),i()(),r(5,"mat-card-content")(6,"form",1),x("ngSubmit",function(){return a.onSubmit()}),r(7,"mat-form-field",2)(8,"mat-label"),o(9,"Email"),i(),d(10,"input",3),i(),r(11,"mat-form-field",2)(12,"mat-label"),o(13,"Full Name"),i(),d(14,"input",4),f(15,se,2,0,"mat-error",5)(16,ce,2,0,"mat-error",5),i(),r(17,"div",6)(18,"button",7)(19,"mat-icon"),o(20,"save"),i(),o(21," Update Profile "),i()()()()()()),n&2){let u,D;l(6),c("formGroup",a.profileForm),l(9),c("ngIf",(u=a.profileForm.get("fullName"))==null?null:u.hasError("required")),l(),c("ngIf",(D=a.profileForm.get("fullName"))==null?null:D.hasError("maxlength")),l(2),c("disabled",!a.profileForm.valid||a.isLoading)}},dependencies:[v,_,C,S,E,y,F,M,J,Q,X,K,k,I,P,N,j],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:1rem}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.button-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:1rem}mat-card[_ngcontent-%COMP%]{padding:2rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}"]})}}return t})(),ge=[{path:"login",component:de},{path:"register",component:ue},{path:"profile",component:fe}],Ge=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=q({type:t})}static{this.\u0275inj=B({imports:[A,W,H.forChild(ge),V,Y,ee,te,z,ie,ne]})}}return t})();export{Ge as AuthModule};
